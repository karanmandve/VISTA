<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <link rel=”stylesheet” href=”https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css” integrity=”sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T” crossorigin=”anonymous”>
    <title>Change Password</title>
  </head>
  <body>
  <section id="password_form" style="margin: 50px 50px 75px 100px;">
  <form method="POST" action="/change-password" class="row g-3 needs-validation" id="form" novalidate>
  <div class="form-group">
        <label>Current Password</label>
    {{form.current(placeholder="Password", class="form-control", type="text",id="current")}}
<!--    <input type="text" class="form-control" id="current" placeholder="Password">-->
  </div>
      <div class="form-group">
    <label >New Password</label>
            {{form.new(placeholder="Password", class="form-control", type="text",id="new")}}

<!--    <input type="text" class="form-control" id="new" placeholder="Password">-->
  </div>
       <div class="form-group">
    <label >New Password, Again</label>
    <input type="text" class="form-control" id="new2" placeholder="Password">
  </div>

  <button type="submit" class="btn btn-primary" id="submit_button">Submit</button>
</form>
  </section>
    <script>
        const new1 = document.getElementById('new');
        const new2 = document.getElementById('new2');
        const current=document.getElementById('current');
        var response= '{{ message }}';
        console.log("message: "+response);
        if(response!=''){
            alert(response);
            new1.value='';
            new2.value='';
            current.value='';
            if(response=='Password updated successfully'){
                window.location = '/teacher-login';
            }
         }
        const pattern = new RegExp('((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))')
        const submitButton= document.getElementById('submit_button');
        submitButton.disabled=true;

        const inputHandler = function(e) {
          if((new1.value === new2.value) && (pattern.test(new1.value)) && current.value!=''){
              submitButton.disabled=false;
          }else{
              submitButton.disabled=true;
          }
        }

        current.addEventListener('input', inputHandler);
        new1.addEventListener('input', inputHandler);
        new2.addEventListener('input', inputHandler);
    </script>






    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>